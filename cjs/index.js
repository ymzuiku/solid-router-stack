"use strict";var E=Object.defineProperty;var et=Object.getOwnPropertyDescriptor;var st=Object.getOwnPropertyNames;var ot=Object.prototype.hasOwnProperty;var nt=(t,s)=>{for(var o in s)E(t,o,{get:s[o],enumerable:!0})},at=(t,s,o,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let c of st(s))!ot.call(t,c)&&c!==o&&E(t,c,{get:()=>s[c],enumerable:!(r=et(s,c))||r.enumerable});return t};var rt=t=>at(E({},"__esModule",{value:!0}),t);var Et={};nt(Et,{createRouter:()=>St,useAnimationNavigation:()=>j});module.exports=rt(Et);var W=require("solid-js/web"),I=require("solid-js/web"),z=require("solid-js/web"),q=require("solid-js/web"),M=require("solid-js/web"),X=require("solid-js/web"),x=require("solid-js/web"),f=require("solid-js"),Y=require("solid-js/store");var D=[],it=t=>{D.push(t)},w=[],ct=t=>{w.push(t)};["popstate","pushState","replaceState","backState"].forEach(t=>{window.addEventListener(t,()=>{t==="popstate"&&e.stack.pop();let s=e.stack[e.stack.length-1];D.forEach(o=>{o(s?s.path:"",t,e.stack)})})});var m=t=>({url:t,path:t.split("?")[0],params:O(t)||{},time:Date.now(),index:e.stack.length}),lt=t=>{w.forEach(s=>{t=s(t)}),e.stack.forEach(s=>{s.tempData=void 0}),e.stack.push(m(t)),e.useHash&&(t="/#"+t),history.pushState(null,"",t),window.dispatchEvent(new Event("pushState"))},pt=t=>{w.forEach(s=>{t=s(t)}),e.stack.forEach(s=>{s.tempData=void 0}),e.stack.push(m(t)),e.useHash&&(t="/#"+t),history.replaceState(null,"",t),window.dispatchEvent(new Event("replaceState"))},H=(t,s)=>{if(w.forEach(o=>{t=o(t)}),e.stack.forEach(o=>{o.tempData=void 0}),e.stack.length>0&&e.stack.pop(),e.stack.push(m(t)),e.useHash&&(t="/#"+t),s){let o=e.stack[e.stack.length-1];o.tempData=s}history.replaceState(null,"",t),window.dispatchEvent(new Event("replaceState"))},L=t=>{let s=e.stack.length;s>1&&e.stack.pop();let o=e.stack[e.stack.length-1];if(s===1){let c=o.time,u=o.url;o=m(e.onLastBack(o)),u===o.url&&(o.time=c),e.stack[e.stack.length-1]=o}let r=o.url;return e.useHash&&(r="/#"+o.url),t&&(e.stack[e.stack.length-1].tempData=t),r},ft=t=>{let s=L(t);history.replaceState(null,"",s),window.dispatchEvent(new Event("backState"))},ut=t=>{let s=L(t);history.replaceState(null,"",s),window.dispatchEvent(new Event("replaceState"))},ht=t=>{e.stack=[m(t)],H(t)};function dt(){let[t,s]=location.href.split("#");return new URLSearchParams([t.split("?")[1],s.split("?")[1]].join("&"))}function mt(){if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1].split("?")[0]}function kt(){if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1]}function O(t){let[s,o]=t.split("#"),r=new URLSearchParams([s.split("?")[1],o.split("?")[1]].join("&")),c={};for(let[u,k]of r.entries())c[u]=k;return c}var e={search:dt,nowUrl:mt,nowFullUrl:kt,push:lt,pushNotHistory:pt,replace:H,goBack:ft,gobackNotHistory:ut,clearTo:ht,listen:it,beforeChange:ct,searchUrlToObject:O,onLastBack:t=>t.url,newStack:m,stack:[],useHash:!1};var v;function b(){if(v!==void 0)return v;let t=navigator.userAgent.toLocaleLowerCase();return v=new RegExp("(iphone|ipod|ipad)").test(t)&&new RegExp("(micromessenger)").test(t),v}var F=require("solid-js/web"),gt=(0,F.template)("<div>Not found page</div>",2),i={prefix:"#",classBefore:"",classNow:"",classAfter:"",navigationDuration:0,notFound:{async:!0,render:()=>gt.cloneNode(!0)}};var wt=`
.solid-router-stack-now-up {
  will-change: transform, opacity;
  transition: transform 200ms ease-out, opacity 300ms ease-out;
}
.solid-router-stack-before-up {
  will-change: transform, opacity;
  transition: transform 200ms ease-out, opacity 300ms ease-out;
  opacity: 0;
  transform: translateY(10vh);
}
.solid-router-stack-after-up {
  will-change: transform, opacity;
  transition: transform 200ms ease-out, opacity 300ms ease-out;
  transform: translateY(-5vh);
}
.solid-router-stack-now-left {
  will-change: transform, opacity;
  transition: transform 200ms ease-out, opacity 300ms ease-out;
}
.solid-router-stack-before-left {
  will-change: transform, opacity;
  transition: transform 200ms ease-out, opacity 300ms ease-out;
  opacity: 0;
  transform: translateX(10vh);
}
.solid-router-stack-after-left {
  will-change: transform, opacity;
  transition: transform 200ms ease-out, opacity 300ms ease-out;
  transform: translateX(-5vh);
}
`,vt=()=>{if(typeof window<"u"&&!document.getElementById("solid-router-stack-css")){let t=document.createElement("style");t.id="solid-router-stack-css",t.innerHTML=wt,document.head.append(t)}},j=t=>{Object.assign(i,{classBefore:t==="moveUp"?"solid-router-stack-before-up":"solid-router-stack-before-left",classNow:t==="moveUp"?"solid-router-stack-now-up":"solid-router-stack-now-left",classAfter:t==="moveUp"?"solid-router-stack-after-up":"solid-router-stack-after-left",navigationDuration:200}),vt()};var yt=(0,W.template)("<div></div>",2);function y(t,s){return s?i.prefix+t+"?"+new URLSearchParams(s).toString():i.prefix+t}var St=t=>{let s={...t},[o,r]=(0,f.createRoot)(()=>(0,Y.createStore)({list:e.stack})),c=n=>{r("list",o.list.length-1,{className:n})},u=n=>{o.list.length>1&&r("list",o.list.length-2,{className:n})},k=0,d=!1;e.listen(()=>{let n=e.stack.length,a=e.stack[e.stack.length-1];i.navigationDuration>0?n>k?(r("list",[...e.stack]),r("list",o.list.length-1,{stackTop:!0}),o.list.length>1&&r("list",o.list.length-2,{stackTop:!1}),d?(c(i.classNow),u(i.classAfter)):(c(i.classBefore),requestAnimationFrame(()=>{c(i.classNow),u(i.classAfter)}))):k!==n?(r("list",o.list.length-2,{stackTop:!0}),o.list.length>2&&r("list",o.list.length-3,{stackTop:!1}),c(i.classBefore),u(i.classNow),d?r("list",[...e.stack]):setTimeout(()=>{r("list",[...e.stack])},i.navigationDuration)):(c(i.classNow),u(i.classAfter),r("list",[...e.stack]),r("list",o.list.length-1,{stackTop:!0}),o.list.length>1&&r("list",o.list.length-2,{stackTop:!1})):(r("list",[...e.stack]),r("list",o.list.length-1,{stackTop:!0}),o.list.length>1&&r("list",o.list.length-2,{stackTop:!1})),k=n,a.tempData&&r("list",e.stack.length-1,{params:{...a.params},tempData:{...a.tempData}}),d&&requestAnimationFrame(()=>{d=!1})});let G=n=>{b()?e.gobackNotHistory(n):e.goBack(n)},_=n=>{n.async?n.Component=n.render:n.Component=(0,f.lazy)(n.render),n.push=a=>{b()?e.pushNotHistory(y(n.path,a)):e.push(y(n.path,a))},n.replace=a=>{e.replace(y(n.path,a))},n.clearTo=a=>{e.clearTo(y(n.path,a))}};_(i.notFound),Object.keys(s).forEach(n=>{let a=s[n];_(a)});let S={},$=[];Object.keys(s).map(n=>{let a=s[n];a&&(S[i.prefix+a.path]=a,a.async||$.push(a))});function J(n){n.preloadAll?$.forEach(a=>{a.render()}):n.preload&&setTimeout(()=>{n.preload().forEach(g=>{g.async||g.render()})},200)}let K=({root:n})=>{let a=e.nowUrl(),g=e.searchUrlToObject(i.prefix+e.nowFullUrl());if(d=!0,n.push(),a!=="/"&&a!==n.path){let h=S[i.prefix+a]||i.notFound;d=!0,h.push({...g,stackAnime:"noPush"})}let[Q,V]=(0,f.createSignal)(typeof window<"u"?window.innerWidth:0),[Z,tt]=(0,f.createSignal)(typeof window<"u"?window.innerHeight:0);return typeof window<"u"&&window.addEventListener("resize",()=>{V(window.innerWidth),tt(window.innerHeight)}),(0,x.createComponent)(f.For,{get each(){return o.list},children:(h,U)=>{let T=S[h.path]||i.notFound;return J(T),(()=>{let p=yt.cloneNode(!0);return p.style.setProperty("position","fixed"),p.style.setProperty("top","0px"),p.style.setProperty("left","0px"),p.style.setProperty("background","#fff"),(0,M.insert)(p,(0,x.createComponent)(T.Component,(0,X.mergeProps)({get stackTop(){return h.stackTop}},()=>h.params,()=>h.tempData))),(0,q.effect)(l=>{let N=h.path,P=h.className,R=U()<o.list.length-1?"none":"auto",A=U()*10,B=Q()+"px",C=Z()+"px";return N!==l._v$&&(0,z.setAttribute)(p,"data-path",l._v$=N),P!==l._v$2&&(0,I.className)(p,l._v$2=P),R!==l._v$3&&p.style.setProperty("pointer-events",l._v$3=R),A!==l._v$4&&p.style.setProperty("z-index",l._v$4=A),B!==l._v$5&&p.style.setProperty("width",l._v$5=B),C!==l._v$6&&p.style.setProperty("height",l._v$6=C),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),p})()}})};return{...s,goBack:G,search:e.search,nowUrl:e.nowUrl,nowFullUrl:e.nowFullUrl,searchUrlToObject:e.searchUrlToObject,listen:e.listen,beforeChange:e.beforeChange,getStack:()=>e.stack,Routers:K}};
